<!DOCTYPE html>
<html>
<head>
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #1a1a24;
            --bg-hover: #252532;
            --text-primary: #e4e4e7;
            --text-secondary: #a1a1aa;
            --border: #27272a;
        }
        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: sans-serif;
            padding: 2rem;
        }
    </style>
</head>
<body>
    <h2>Corporate Structure Test</h2>
    <div id="corporate-content"></div>
    
    <script>
        // Mock data matching the API structure
        const mockData = {
            team: [
                { name: "Rai", emoji: "üëë", role: "CEO", department: "executive", level: 1 },
                { name: "Kimi", emoji: "üìä", role: "Chief of Staff", department: "executive", level: 2 },
                { name: "Dave", emoji: "üìà", role: "Chief Briefer", department: "operations", level: 3 },
                { name: "Bob", emoji: "üîç", role: "Senior Analyst", department: "operations", level: 3 },
                { name: "Alex", emoji: "üíª", role: "Junior Developer", department: "technical", level: 3 }
            ],
            departments: [
                { id: "executive", name: "Executive", hex: "#f59e0b" },
                { id: "operations", name: "Operations", hex: "#3b82f6" },
                { id: "technical", name: "Technical", hex: "#10b981" }
            ]
        };

        function loadCorporate() {
            const data = mockData;
            const colors = {};
            data.departments?.forEach(d => colors[d.id] = d.hex);
            
            // Organize by level
            const byLevel = {};
            data.team.forEach(m => {
                const lvl = m.level || 3;
                byLevel[lvl] = byLevel[lvl] || [];
                byLevel[lvl].push(m);
            });
            
            let html = '<table style="width:100%;border-collapse:collapse;border-spacing:0;text-align:center;">';
            
            // Row 1: Level 1 (CEO) - centered, spans all columns
            if (byLevel[1]) {
                html += '<tr><td colspan="3" style="padding:1rem 0;">';
                byLevel[1].forEach(m => {
                    html += makeCard(m, colors[m.department]);
                });
                html += '</td></tr>';
            }
            
            // Row 2: Connector line (‚îÇ)
            html += '<tr><td colspan="3" style="padding:0;font-size:1.5rem;color:var(--border);height:2rem;">‚îÇ</td></tr>';
            
            // Row 3: Level 2 (Chief of Staff) - centered
            if (byLevel[2]) {
                html += '<tr><td colspan="3" style="padding:1rem 0;">';
                byLevel[2].forEach(m => {
                    html += makeCard(m, colors[m.department]);
                });
                html += '</td></tr>';
            }
            
            // Row 4: Connector branches (‚îú‚îÄ‚îº‚îÄ‚î§)
            html += '<tr><td colspan="3" style="padding:0;font-size:1.5rem;color:var(--border);height:2rem;">‚îú‚îÄ‚îº‚îÄ‚î§</td></tr>';
            
            // Row 5: Level 3 (Team) - 3 columns (Dave, Bob, Alex)
            if (byLevel[3]) {
                html += '<tr>';
                // Ensure we have exactly 3 columns, fill empty cells if needed
                const teamMembers = byLevel[3];
                for (let i = 0; i < 3; i++) {
                    html += '<td style="padding:1rem 0.5rem;vertical-align:top;width:33%;">';
                    if (teamMembers[i]) {
                        html += makeCard(teamMembers[i], colors[teamMembers[i].department]);
                    }
                    html += '</td>';
                }
                html += '</tr>';
            }
            
            html += '</table>';
            
            // Department color legend at bottom
            if (data.departments?.length) {
                html += '<div style="margin-top:2rem;text-align:center;padding:1rem;border-top:1px solid var(--border);">';
                data.departments.forEach(d => {
                    html += `<span style="display:inline-block;margin:0 1rem;color:${d.hex}">‚óè ${d.name}</span>`;
                });
                html += '</div>';
            }
            
            document.getElementById('corporate-content').innerHTML = html;
        }

        function makeCard(m, color) {
            return `<div style="display:inline-block;border:2px solid ${color};border-radius:12px;padding:1.5rem;background:var(--bg-card);min-width:180px;max-width:200px;box-shadow:0 4px 15px rgba(0,0,0,0.3);">
                <div style="font-size:3rem;margin-bottom:0.5rem;">${m.emoji}</div>
                <div style="font-weight:bold;font-size:1.2rem;margin-bottom:0.25rem;">${m.name}</div>
                <div style="color:${color};font-size:0.9rem;margin-bottom:0.5rem;">${m.role}</div>
            </div>`;
        }

        // Load on page load
        loadCorporate();
    </script>
</body>
</html>